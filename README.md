# 山体滑坡监测系统 (Landslide Monitoring System)

基于OpenHarmony rk2206单片机的山体滑坡终端监测系统

## 项目概述

本项目基于rk2206软通套件实际硬件配置，实现了一个完整的山体滑坡监测系统：

###  监测传感器
- **MPU6050**: 六轴加速度陀螺仪传感器 (核心传感器)
- **SHT30**: 温湿度传感器 (环境监测)
- **BH1750**: 光照强度传感器 (辅助监测)

###  报警指示系统
- **RGB灯**: 风险等级视觉指示
- **蜂鸣器**: 声音报警
- **LCD显示**: 实时数据展示
- **语音播报**: 状态通知

###  交互功能
- **功能按键**: 用户操作
- **电机**: 物理响应

## 硬件引脚配置

### 传感器接口
```
I2C总线 (共用):
- SDA: GPIO0_PA0
- SCL: GPIO0_PA1
- 设备: MPU6050, SHT30, BH1750

LCD显示 (SPI):
- CS:   GPIO0_PC0
- CLK:  GPIO0_PC1  
- MOSI: GPIO0_PC2
- RES:  GPIO0_PC3
- DC:   GPIO0_PA4
```

### 输出设备
```
RGB灯 (PWM):
- R: GPIO0_PB5 (PWM1)
- G: GPIO1_PD0 (PWM7)  
- B: GPIO0_PB4 (PWM0)

蜂鸣器: GPIO0_PC5 (PWM5)
电机:   GPIO0_PC6 (PWM6)
```

### 交互设备
```
功能按键: GPIO0_PC7
语音模块: TX: GPIO0_PB2, RX: GPIO0_PB3 (UART)
```

## 风险评估算法

基于多传感器数据的综合评估：

### 风险等级
- **安全** (绿色): 所有参数正常
- **低风险** (黄色): 轻微异常
- **中风险** (橙色): 明显变化
- **高风险** (红色): 显著异常
- **危急** (闪烁红色): 极度危险

### 评估参数
1. **倾斜角度**: 基于MPU6050加速度计算
2. **振动强度**: 基于加速度变化率
3. **环境湿度**: SHT30湿度变化趋势
4. **光照变化**: BH1750光照异常检测

## 系统特性

- **多线程架构**: 传感器采集、数据处理、风险评估、显示控制
- **实时监测**: 10Hz采样频率
- **智能报警**: 分级报警机制
- **用户交互**: 按键控制和语音反馈
- **数据可视化**: LCD实时显示和历史趋势

## 编译和使用

### 编译项目
```bash
hb build -f
```

### 烧录固件
```bash
python3 flash.py rk2206
```

## 操作说明

### 按键功能
- **短按**: 切换LCD显示模式
- **长按**: 系统重置/静音报警

### 显示模式
1. **实时数据**: 显示当前传感器数值
2. **风险状态**: 显示风险等级和描述
3. **历史趋势**: 显示数据变化曲线

### 报警机制
- **RGB灯**: 持续显示当前风险等级
- **蜂鸣器**: 高风险时声音报警
- **语音播报**: 定时状态通知
- **电机振动**: 危急状态物理提醒

## 技术规格

- **采样频率**: 10Hz
- **数据精度**: 16位ADC, 12位PWM
- **响应时间**: <100ms
- **工作温度**: -20°C ~ +70°C
- **供电电压**: 3.3V

## 注意事项

1. 确保所有传感器正确连接
2. 避免强磁场干扰MPU6050
3. 定期校准传感器
4. 保持设备干燥清洁


